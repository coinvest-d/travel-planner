function generateItinerary(city1, city2, startDate, days) {
    const planResult = document.getElementById('planResult');
    const date = new Date(startDate);
    let html = '<div class="itinerary-container">';
    
    const cityGuides = {
        'guangzhou': {
            'attractions': [
                {
                    'morning': {
                        'spot': 'æ²™é¢',
                        'time': '09:00-12:00',
                        'activities': [
                            '09:00 åˆ°è¾¾æ²™é¢ï¼ˆåœ°é“6å·çº¿æ²™é¢ç«™Bå‡ºå£ï¼‰',
                            '09:15-10:30 æ¸¸è§ˆæ²™é¢å»ºç­‘ç¾¤',
                            '10:30-11:30 æ²™é¢å¤§è¡—æ‹ç…§',
                            '11:30-12:00 å“å°æ²™é¢ç‰¹è‰²èŒ¶ç‚¹'
                        ]
                    },
                    'afternoon': {
                        'spot': 'é™ˆå®¶ç¥ ',
                        'time': '14:00-17:00',
                        'transport': 'ä¹˜ååœ°é“6å·çº¿è‡³é»„æ²™ç«™ï¼Œè½¬ä¹˜åœ°é“1å·çº¿è‡³é™ˆå®¶ç¥ ç«™Aå‡ºå£ï¼Œçº¦40åˆ†é’Ÿ',
                        'activities': [
                            '14:00 åˆ°è¾¾é™ˆå®¶ç¥ ',
                            '14:15-16:00 å‚è§‚é™ˆå®¶ç¥ å»ºç­‘ç¾¤',
                            '16:00-17:00 æ¬£èµå²­å—å»ºç­‘è‰ºæœ¯'
                        ]
                    }
                },
                {
                    'morning': {
                        'spot': 'ç™½äº‘å±±',
                        'time': '08:30-12:00',
                        'transport': 'ä¹˜ååœ°é“2å·çº¿è‡³ç™½äº‘å±±ç«™Aå‡ºå£ï¼Œçº¦30åˆ†é’Ÿ',
                        'activities': [
                            '08:30 åˆ°è¾¾ç™½äº‘å±±å—é—¨',
                            '09:00-10:30 ç™»å±±æ¸¸è§ˆ',
                            '10:30-11:30 å‚è§‚æ‘©æ˜Ÿå²­',
                            '11:30-12:00 ç™½äº‘å±±è§‚æ™¯å°æ‹ç…§'
                        ]
                    },
                    'afternoon': {
                        'spot': 'å¹¿å·å¡”',
                        'time': '15:00-18:00',
                        'transport': 'ä¹˜ååœ°é“3å·çº¿è‡³å¹¿å·å¡”ç«™ï¼Œçº¦45åˆ†é’Ÿ',
                        'activities': [
                            '15:00 åˆ°è¾¾å¹¿å·å¡”',
                            '15:30-16:30 ç™»å¡”è§‚å…‰',
                            '16:30-17:30 ç©ºä¸­æ—‹è½¬é¤å…ç”¨é¤',
                            '17:30-18:00 è§‚èµå¤œæ™¯'
                        ]
                    }
                }
            ]
        },
        'shenzhen': {
            'attractions': [
                {
                    'morning': {
                        'spot': 'ä¸–ç•Œä¹‹çª—',
                        'time': '09:30-13:00',
                        'transport': 'åœ°é“1å·çº¿è‡³ä¸–ç•Œä¹‹çª—ç«™Då‡ºå£ï¼Œçº¦25åˆ†é’Ÿ',
                        'activities': [
                            '09:30 åˆ°è¾¾ä¸–ç•Œä¹‹çª—',
                            '10:00-11:30 æ¸¸è§ˆæ¬§æ´²åŒºå’Œäºšæ´²åŒº',
                            '11:30-13:00 å‚è§‚ç¾æ´²åŒºå’Œéæ´²åŒº'
                        ]
                    },
                    'afternoon': {
                        'spot': 'æ·±åœ³æ¹¾å…¬å›­',
                        'time': '15:00-18:00',
                        'transport': 'ä¹˜ååœ°é“2å·çº¿è‡³æ·±åœ³æ¹¾ç«™ï¼Œçº¦35åˆ†é’Ÿ',
                        'activities': [
                            '15:00 åˆ°è¾¾æ·±åœ³æ¹¾å…¬å›­',
                            '15:30-16:30 æµ·æ»¨æ ˆé“æ¼«æ­¥',
                            '16:30-17:30 çº¢æ ‘æ—ç”Ÿæ€åŒºè§‚å…‰',
                            '17:30-18:00 è§‚èµæ—¥è½'
                        ]
                    }
                }
            ]
        }
    };

    // ç”ŸæˆHTML
    html += `<div class="day-plan">
        <h2>è¯¦ç»†è¡Œç¨‹å®‰æ’</h2>
        <p class="plan-note">* ä»¥ä¸‹è¡Œç¨‹ä»…ä¾›å‚è€ƒï¼Œå¯æ ¹æ®å®é™…æƒ…å†µè°ƒæ•´</p>
    `;

    for (let i = 0; i < days; i++) {
        const currentDate = new Date(date);
        currentDate.setDate(date.getDate() + i);
        const currentCity = i < days/2 ? city1 : city2;
        const cityData = cityGuides[currentCity];
        const dayPlan = cityData.attractions[i % cityData.attractions.length];

        html += `
            <div class="day-card">
                <div class="day-header">
                    <h3>ç¬¬${i+1}å¤© ${currentDate.toLocaleDateString('zh-CN')}</h3>
                    <span class="city-tag">${currentCity.toUpperCase()}</span>
                </div>
                
                <div class="time-block morning">
                    <h4>${dayPlan.morning.time} Â· ${dayPlan.morning.spot}</h4>
                    <div class="activities">
                        ${dayPlan.morning.activities.map(activity => 
                            `<p>ğŸ•’ ${activity}</p>`
                        ).join('')}
                    </div>
                </div>

                <div class="transport-info">
                    <p>ğŸš‡ ${dayPlan.afternoon.transport}</p>
                </div>

                <div class="time-block afternoon">
                    <h4>${dayPlan.afternoon.time} Â· ${dayPlan.afternoon.spot}</h4>
                    <div class="activities">
                        ${dayPlan.afternoon.activities.map(activity => 
                            `<p>ğŸ•’ ${activity}</p>`
                        ).join('')}
                    </div>
                </div>
            </div>
        `;
    }

    html += '</div></div>';
    planResult.innerHTML = html;
}


