function generateItinerary(city1, city2, startDate, days) {
    const planResult = document.getElementById('planResult');
    const date = new Date(startDate);
    let html = '<div class="itinerary-container">';
    
    const cityGuides = {
        'guangzhou': {
            'attractions': [
                {
                    'morning': {
                        'spot': '沙面',
                        'time': '09:00-12:00',
                        'activities': [
                            '09:00 到达沙面（地铁6号线沙面站B出口）',
                            '09:15-10:30 游览沙面建筑群',
                            '10:30-11:30 沙面大街拍照',
                            '11:30-12:00 品尝沙面特色茶点'
                        ]
                    },
                    'afternoon': {
                        'spot': '陈家祠',
                        'time': '14:00-17:00',
                        'transport': '乘坐地铁6号线至黄沙站，转乘地铁1号线至陈家祠站A出口，约40分钟',
                        'activities': [
                            '14:00 到达陈家祠',
                            '14:15-16:00 参观陈家祠建筑群',
                            '16:00-17:00 欣赏岭南建筑艺术'
                        ]
                    }
                },
                {
                    'morning': {
                        'spot': '白云山',
                        'time': '08:30-12:00',
                        'transport': '乘坐地铁2号线至白云山站A出口，约30分钟',
                        'activities': [
                            '08:30 到达白云山南门',
                            '09:00-10:30 登山游览',
                            '10:30-11:30 参观摩星岭',
                            '11:30-12:00 白云山观景台拍照'
                        ]
                    },
                    'afternoon': {
                        'spot': '广州塔',
                        'time': '15:00-18:00',
                        'transport': '乘坐地铁3号线至广州塔站，约45分钟',
                        'activities': [
                            '15:00 到达广州塔',
                            '15:30-16:30 登塔观光',
                            '16:30-17:30 空中旋转餐厅用餐',
                            '17:30-18:00 观赏夜景'
                        ]
                    }
                }
            ]
        },
        'shenzhen': {
            'attractions': [
                {
                    'morning': {
                        'spot': '世界之窗',
                        'time': '09:30-13:00',
                        'transport': '地铁1号线至世界之窗站D出口，约25分钟',
                        'activities': [
                            '09:30 到达世界之窗',
                            '10:00-11:30 游览欧洲区和亚洲区',
                            '11:30-13:00 参观美洲区和非洲区'
                        ]
                    },
                    'afternoon': {
                        'spot': '深圳湾公园',
                        'time': '15:00-18:00',
                        'transport': '乘坐地铁2号线至深圳湾站，约35分钟',
                        'activities': [
                            '15:00 到达深圳湾公园',
                            '15:30-16:30 海滨栈道漫步',
                            '16:30-17:30 红树林生态区观光',
                            '17:30-18:00 观赏日落'
                        ]
                    }
                }
            ]
        }
    };

    // 生成HTML
    html += `<div class="day-plan">
        <h2>详细行程安排</h2>
        <p class="plan-note">* 以下行程仅供参考，可根据实际情况调整</p>
    `;

    for (let i = 0; i < days; i++) {
        const currentDate = new Date(date);
        currentDate.setDate(date.getDate() + i);
        const currentCity = i < days/2 ? city1 : city2;
        const cityData = cityGuides[currentCity];
        const dayPlan = cityData.attractions[i % cityData.attractions.length];

        html += `
            <div class="day-card">
                <div class="day-header">
                    <h3>第${i+1}天 ${currentDate.toLocaleDateString('zh-CN')}</h3>
                    <span class="city-tag">${currentCity.toUpperCase()}</span>
                </div>
                
                <div class="time-block morning">
                    <h4>${dayPlan.morning.time} · ${dayPlan.morning.spot}</h4>
                    <div class="activities">
                        ${dayPlan.morning.activities.map(activity => 
                            `<p>🕒 ${activity}</p>`
                        ).join('')}
                    </div>
                </div>

                <div class="transport-info">
                    <p>🚇 ${dayPlan.afternoon.transport}</p>
                </div>

                <div class="time-block afternoon">
                    <h4>${dayPlan.afternoon.time} · ${dayPlan.afternoon.spot}</h4>
                    <div class="activities">
                        ${dayPlan.afternoon.activities.map(activity => 
                            `<p>🕒 ${activity}</p>`
                        ).join('')}
                    </div>
                </div>
            </div>
        `;
    }

    html += '</div></div>';
    planResult.innerHTML = html;
}


